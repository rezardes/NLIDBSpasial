<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
crossorigin=""/>
<script src="https://npmcdn.com/@turf/turf/turf.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/geojson/0.5.0/geojson.js"></script>
<title>Page Title</title>
<style>
    #map { height: 180px; }
</style>
</head>
<body>
<div id="result"></div>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
crossorigin=""></script>
<script>

        data = localStorage.getItem('geomdata')
        data = JSON.parse(data)
        alert(JSON.stringify(data))

        if (data['data'][0]['type']=='text') {
            alert("tes")
            $(document).ready(function(){
                for (elmt of data['data']) {
                    $( "#result" ).append( "<p>" );
                    for (text of elmt['text']) {
                        $( "#result" ).append( text+"&nbsp;"+"&nbsp;"+"&nbsp;" );
                    }
                    $( "#result" ).append( "</p>" );
                }
            });
            
            
        } else {

            var map = L.map('map').setView([-6.88461632,107.61314929], 20)
            var isRadCircle = false
            var isPointCircle = false
            var radCircle = 0
            var pointCircle = []
            for (elmt of data['data']) {

                for (i = 0; i < elmt['type'].length; i++) {
                    var latlngs = elmt['coordinates'][i]
                    if (elmt['type'][i]=="Polygon") {
                        var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);
                    } else if (elmt['type'][i]=="radCircle") {
                        isRadCircle = true
                        radCircle = elmt['value'][i]
                    } else if (elmt['type'][i]=="pointCircle") {
                        pointCircle = elmt['coordinates'][i]
                        isPointCircle = true
                    }

                    if (isRadCircle && isPointCircle) {
                        isPointCircle = false
                        isRadCircle = false
                        L.circle(pointCircle, {radius: radCircle}).addTo(map);
                    }
                }

                for (i = 0; i < elmt['text'].length; i++) {
                    //console.log(elmt['coordinates'][0][0][0])
                    /*L.marker(elmt['coordinates'][0][0][0]).addTo(map)
                        .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
                        .openPopup();

                    L.marker([-6.884616,107.613149]).addTo(map)
                        .bindPopup('A pretty CSS3.')
                        .openPopup();*/
                }
                
            }

            L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map); 

        }

        /*var center = [-75.343, 39.984];
        var radius = 10;
        var options = {steps: 10, units: 'meters', properties: {foo: 'bar'}};
        var circle = turf.circle(center, radius, options);*/

        /*var point = turf.point([-90.548630, 14.616599]);
        var circle = turf.buffer(point, 0.00005, {units: 'degrees'});*/
        //console.log(point.getGeometry().transform('EPSG:4326', 'EPSG:3857'));
        //console.log(point);

        //var format = new GeoJSON();
        //console.log(format)
        //var marker = format.readFeature(point);
        //console.log(marker.getGeometry().transform('EPSG:4326', 'EPSG:3857'));

        //var latlngs = point["geometry"]["coordinates"];
        //console.log(latlngs)
        //var latlngs = [[[8.02635751861205,90.718808830798],[5.98399648294529,90.0824818660571],[3.44709977456866,90.1198683185766],[0.513158743793037,90.8295311927881],[-2.7050769444445,92.1841983777677],[-6.083932220899,94.1318107242801],[-9.49355937815152,96.5975226609287],[-12.8029280766641,99.4865784443829],[-15.884860818928,102.687953559711],[-18.6209203467567,106.078621271958],[-20.9059611610074,109.528280421704],[-22.6521702677114,112.904362808904],[-23.792441778752,116.077127639784],[-24.2829557777134,118.924647389558],[-24.1048622807472,121.33749339275],[-23.2650055976126,123.222941143549],[-21.7956612724494,124.508533674467],[-19.7532956892652,125.144866061571],[-17.2163960776152,125.107484108284],[-14.2824542254256,124.39782411755],[-11.0642199250944,123.043157768361],[-7.68536803484798,121.095544077535],[-4.27574574659733,118.629828824602],[-0.966382657775377,115.740768255526],[2.11554459234506,112.53938761155],[4.85159957265629,109.148714476939],[7.13663748504988,105.699050827962],[8.88284577033997,102.322965554451],[10.0231186692868,99.1501998906133],[10.5136360530401,96.3026814851537],[10.3355474250758,93.8898387968286],[9.49569635021557,92.0043958316515],[8.02635751861205,90.718808830798]]];
        //var map = L.map('map').setView([-6.8845352, 107.6135695], 20, {crs: L.CRS.EPSG4326})
        //var polygon = L.polygon([-90.548630, 14.616599], {color: 'red'}).addTo(map);
        /*L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);*/
        

        //var latlngs = [[[-6.88461632,107.61314929],[-6.8846536,107.61331558],[-6.88485598,107.61328876],[-6.88487196,107.61332631],[-6.8850051,107.61331558],[-6.88495717,107.61308491],[-6.88461632,107.61314929]]];
        //var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);

        // /var latlngs = [[[-6.88439797,107.61355698],[-6.88448318,107.61381984],[-6.88477609,107.61372864],[-6.88470153,107.61347115],[-6.88439797,107.61355698]]]
        //var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);
        //var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);
        
        //alert('hello');
        

        // latlngs = data['coordinates']

        //var latlngs = [[[-98.9961841996954,45.0045055398407],[-99.0153989192922,44.8094152178246],[-99.0723046671842,44.6218221074757],[-99.1647145873929,44.4489353068211],[-99.2890774185089,44.2973987586542],[-99.4406139666758,44.1730359275382],[-99.6135007673304,44.0806260073295],[-99.8010938776793,44.0237202594375],[-99.9961841996954,44.0045055398407],[-100.191274521712,44.0237202594375],[-100.378867632061,44.0806260073295],[-100.551754432715,44.1730359275382],[-100.703290980882,44.2973987586542],[-100.827653811998,44.4489353068211],[-100.920063732207,44.6218221074757],[-100.976969480099,44.8094152178246],[-100.996184199695,45.0045055398407],[-100.976969480099,45.1995958618569],[-100.920063732207,45.3871889722058],[-100.827653811998,45.5600757728603],[-100.703290980882,45.7116123210273],[-100.551754432715,45.8359751521433],[-100.378867632061,45.928385072352],[-100.191274521712,45.985290820244],[-99.9961841996954,46.0045055398407],[-99.8010938776793,45.985290820244],[-99.6135007673304,45.928385072352],[-99.4406139666759,45.8359751521433],[-99.2890774185089,45.7116123210273],[-99.1647145873929,45.5600757728603],[-99.0723046671842,45.3871889722058],[-99.0153989192922,45.1995958618569],[-98.9961841996954,45.0045055398407]]];
        //var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);

        /*L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
         attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);*/

        //alert(circle.getBounds());
        // zoom ke polygon
        //map.fitBounds(polygon.getBounds()); 

       /*L.marker([-6.8941224, 107.6056536]).addTo(map)
            .bindPopup('Upnormal Cafe.')
            .openPopup();*/
</script>

</body>
</html> 